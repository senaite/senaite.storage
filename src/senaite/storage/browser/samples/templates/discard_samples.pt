<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns="http://www.w3.org/1999/xhtml"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="senaite.storage">
<head>
  <metal:block fill-slot="senaite_legacy_resources"
               tal:define="portal context/@@plone_portal_state/portal;">
  </metal:block>
</head>
<body>

  <!-- Title -->
  <metal:title fill-slot="content-title">
    <h1 i18n:translate="">
      Discard samples
    </h1>
  </metal:title>

  <!-- Description -->
  <metal:description fill-slot="content-description">
    <p i18n:translate="">
      <a tal:attributes="href view/back_url"
         i18n:name="back_link"
         i18n:translate="">
        &larr; Back
      </a>
    </p>
  </metal:description>

  <!-- Content -->
  <metal:core fill-slot="content-core">
    <div id="dispatch-samples-view"
         class="row"
         tal:define="portal    context/@@plone_portal_state/portal;
                     reasons   view/get_reasons;">

      <div class="col-sm-12">
        <form class="form rowlike"
              id="discard_samples_form"
              name="discard_samples_form"
              method="post">

          <!-- Hidden Fields -->
          <input type="hidden" name="submitted" value="1"/>
          <input tal:replace="structure context/@@authenticator/authenticator"/>

          <div i18n:translate="" class="mb-3 text-secondary">
            The following sample(s) will be discarded
          </div>

          <ul class="list mb-3" tal:repeat="sample view/get_samples_data">
            <li class="list-item">
              <input type="hidden" name="uids:list"
                     tal:attributes="value sample/uid"/>
              <div class="list-group-item-heading">
                <a href="#" tal:attributes="href sample/url">
                  <span tal:content="sample/title"/>
                  <small>(<span tal:replace="sample/sample_type"/>)</small>
                </a>
              </div>
            </li>
          </ul>

          <div class="mb-3 field" tal:condition="reasons">
            <label for="reasons" i18n:translate="">Pre-defined reasons</label>
            <div class="form-control-sm mr-2"
                 tal:repeat="reason reasons">
              <input type="checkbox"
                     tal:define="idx repeat/reason/index;"
                     tal:attributes="value string:${reason};"
                     name="reasons:list"/>
              <span tal:content="reason" />
            </div>
          </div>

          <div class="mb-3 field">
            <tal:with_reasons condition="reasons">
              <label for="comment" i18n:translate="">Other reasons</label>
            </tal:with_reasons>
            <tal:wo_reasons condition="not:reasons">
              <label for="comment" i18n:translate="">Reasons</label>
              <span class="required"/>
            </tal:wo_reasons>
            <textarea name="comment"
                      class="form-control"
                      id="comment"
                      placeholder=""
                      style="height: 150px"/>
          </div>

          <!-- Form Controls -->
          <div>
            <input class="btn btn-primary btn-sm"
                   type="submit"
                   name="button_discard"
                   i18n:attributes="value"
                   value="Discard"/>
            <input class="btn btn-secondary btn-sm"
                   type="submit"
                   name="button_cancel"
                   i18n:attributes="value"
                   value="Cancel"/>
          </div>

        </form>
      </div>

    </div>
  </metal:core>

</body>
</html>
